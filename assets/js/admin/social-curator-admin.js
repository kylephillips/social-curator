jQuery(function(t){function a(){i(!0),t("[data-social-curator-manual-import]").attr("disabled","disabled").text(social_curator_admin.importing),t.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_curator_manual_import"},success:function(a){t("[data-social-curator-last-import]").text(a.import_date),o(a.import_count),r(a.posts)}})}function o(a){t("[data-social-curator-import-count]").find("span").text(a),t("[data-social-curator-import-count]").show()}function n(a){t("[data-social-curator-unmoderated-count]").text(a)}function i(a){a?t("[data-curation-loader]").show():t("[data-curation-loader]").hide()}function r(a){return 0===a.length?void s():void t.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_curator_get_posts",posts:a,status:["pending","publish"]},success:function(t){n(t.unmoderated_count),c(t.posts)}})}function c(t){for(var a=0;a<t.length;a++)e(t[a]);s()}function e(a){var o=t("[data-post-template]").find(".social-curator-post-grid-single").clone();if(t(o).find("[data-icon-link]").html(a.icon_link),t(o).find("[data-profile-image]").attr("src",a.profile_image_link),t(o).find("[data-profile-link]").attr("href",a.profile_link),t(o).find("[data-date]").text(a.date),t(o).find("[data-profile-name]").text(a.profile_name),t(o).find("[data-post-id]").attr("data-post-id",a.id),a.thumbnail){var n='<img src="'+a.thumbnail+'" />';t(o).find("[data-thumbnail]").html(n)}a.content&&t(o).find("[data-post-content]").html(a.content),u(o)}function s(){i(!1),t("[data-social-curator-manual-import]").attr("disabled",!1).text(social_curator_admin.run_import)}function u(a){var o=t(".social-curator-post-grid").masonry({itemSelector:".social-curator-post-grid-single",percentPosition:!0,gutter:".gutter-sizer"});o.imagesLoaded(function(){o.masonry()}),a&&o.prepend(a).masonry("prepended",a)}function d(a){i(!0),t.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_curator_trash_post",post_id:a},success:function(){i(!1)}})}t(document).on("click","[data-social-curator-manual-import]",function(t){t.preventDefault(),a()}),t(document).ready(function(){u(!1)}),t(document).on("click","[data-trash-post]",function(a){a.preventDefault(),d(t(this).attr("data-post-id")),t(this).parents(".social-curator-post-grid-single").fadeOut("fast",function(){t(this).remove(),u()})}),t(document).on("click",'[data-dismiss="alert"]',function(a){a.preventDefault(),t(this).parents(".social-curator-alert").fadeOut("fast")})});