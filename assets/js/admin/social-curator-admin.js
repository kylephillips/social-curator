var SocialCuratorLogs=function(){var t=this,a=jQuery;return t.button="[data-social-curator-clear-logs]",t.init=function(){t.bindEvents()},t.bindEvents=function(){a(document).on("click",t.button,function(a){a.preventDefault(),t.clearLogs()})},t.clearLogs=function(){t.toggleLoading(!0),a.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_curator_clear_logs"},success:function(a){t.toggleLoading(!1),console.log(a),document.location.reload(!0)}})},t.toggleLoading=function(o){return o?(a(t.button).attr("disabled","disabled"),void a("[data-log-clear-loader]").css("display","inline-block")):(a(t.button).attr("disabled",!1),void a("[data-log-clear-loader]").css("display","none"))},t.init()};jQuery(document).ready(function(){new SocialCuratorAvatarUpdater});var SocialCuratorAvatarUpdater=function(){var t=this,a=jQuery;return t.button="[data-choose-avatar-image]",t.init=function(){t.bindEvents()},t.bindEvents=function(){a(document).on("click",t.button,function(){t.showMediaLibrary()})},t.showMediaLibrary=function(){return formfield=a("[data-fallback-avatar-field]").attr("name"),tb_show("","media-upload.php?type=image&TB_iframe=true"),!1},window.send_to_editor=function(t){imgurl=a("img",t).attr("src"),a("[data-avatar-image]").find("img").attr("src",imgurl),a("[data-fallback-avatar-field]").val(imgurl),tb_remove()},t.init()};jQuery(document).ready(function(){new SocialCuratorAlert});var SocialCuratorAlert=function(){var t=this,a=jQuery;return t.button='[data-dismiss="alert"]',t.el="",t.init=function(){t.bindEvents()},t.bindEvents=function(){a(document).on("click",t.button,function(o){o.preventDefault(),t.el=a(this).parents(".social-curator-alert"),t.closeAlert()})},t.closeAlert=function(){a(t.el).fadeOut("fast")},t.init()},SocialCuratorModal=function(){var t=this,a=jQuery;return t.modal_id="",t.init=function(){this.bindEvents()},t.bindEvents=function(){a(document).on("click","[data-social-curator-modal-open]",function(o){o.preventDefault(),t.modal_id=a(this).attr("data-social-curator-modal-open"),t.openModal()}),a(document).on("click","[data-social-curator-modal-close]",function(a){a.preventDefault(),t.closeModals()}),a(document).on("click","[data-social-curator-modal]",function(o){0===a(o.target).parents(".social-curator-modal-content").length&&t.closeModals()})},t.openModal=function(){a('[data-social-curator-modal="'+t.modal_id+'"]').addClass("open")},t.closeModals=function(){a("[data-social-curator-modal]").removeClass("open")},t.init()},SocialCuratorDropdown=function(){var t=this,a=jQuery;return t.toggleButton='[data-toggle="social-curator-dropdown"]',t.currentDropdown="",t.init=function(){t.bindEvents()},t.bindEvents=function(){a(document).on("click",t.toggleButton,function(o){o.preventDefault(),t.currentDropdown=a(this).siblings(".social-curator-dropdown-content"),t.toggleDropdown()}),a(document).on("click",function(a){t.windowListener(a.target)})},t.toggleDropdown=function(){a(t.currentDropdown).is(":visible")?a(".social-curator-dropdown-content").hide():(a(".social-curator-dropdown-content").hide(),a(t.currentDropdown).show()),a(t.currentDropdown).parents(".social-curator-dropdown").toggleClass("open")},t.windowListener=function(t){0==a(t).parents(".social-curator-dropdown").length&&(a(".social-curator-dropdown-content").hide(),a(".social-curator-dropdown").removeClass("open"))},t.closeAll=function(){a(".social-curator-dropdown-content").hide(),a(".social-curator-dropdown").removeClass("open")},t.init()};jQuery(function(t){function a(a){var o=t(".social-curator-post-grid").masonry({itemSelector:".social-curator-post-grid-single",percentPosition:!0,gutter:".gutter-sizer"});o.imagesLoaded(function(){o.masonry()}),a&&o.prepend(a).masonry("prepended",a)}function o(a){if(t("[data-social-curator-import-error]").parents(".social-curator-alert-error").hide(),e(!0),t("[data-import-site], [data-social-curator-single-import]").attr("disabled","disabled"),t("[data-social-curator-import-all], [data-social-curator-single-import]").attr("disabled","disabled").text(social_curator_admin.importing),!a)var a="all";t.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_curator_manual_import",site:a},success:function(a){console.log(a),"success"===a.status?(t("[data-social-curator-last-import]").text(a.import_date),i(a),a.import_count>30&&document.location.reload(!0),s(a.posts)):c(a.message)}})}function r(){t("[data-social-curator-import-error]").parents(".social-curator-alert-error").hide(),e(!0),t("[data-import-site], [data-social-curator-single-import]").attr("disabled","disabled"),t("[data-social-curator-import-all], [data-social-curator-single-import]").attr("disabled","disabled").text(social_curator_admin.importing);var a=t("[data-social-curator-single-import-site]").val(),o=t("[data-social-curator-single-import-id]").val();t.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_curator_single_import",site:a,id:o},success:function(a){console.log(a),"success"===a.status?(t("[data-social-curator-last-import]").text(a.import_date),i(a),a.import_count>30&&document.location.reload(!0),s(a.posts)):c(a.message)}})}function i(a){t("[data-social-curator-import-count]").text(a.import_count),t("[data-social-curator-import-site]").text(a.site),t("[data-social-curator-import-count]").parents(".social-curator-alert").show()}function n(a){t("[data-social-curator-unmoderated-count]").text(a)}function c(a){t("[data-social-curator-import-error]").text(a),t("[data-social-curator-import-error]").parents(".social-curator-alert-error").show(),u()}function e(a){a?t("[data-curation-loader]").show():t("[data-curation-loader]").hide()}function s(a){return 0===a.length?void u():void t.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_curator_get_posts",posts:a,status:["pending"],adminview:!0},success:function(t){n(t.unmoderated_count),d(t.posts)}})}function d(t){for(var a=0;a<t.length;a++)l(t[a]);u()}function l(o){var r=t("[data-post-template]").find(".social-curator-post-grid-single").clone();if(t(r).find("[data-icon-link]").html(o.icon_link),t(r).find("[data-profile-image]").attr("src",o.profile_image_link),t(r).find("[data-profile-link]").attr("href",o.profile_link),t(r).find("[data-date]").text(o.date),t(r).find("[data-profile-name]").text(o.profile_name),t(r).find("[data-post-id]").attr("data-post-id",o.id),t(r).attr("data-post-container-id",o.id),o.thumbnail){var i='<img src="'+o.thumbnail+'" />';t(r).find("[data-thumbnail]").html(i)}if(o.content){var n=o.content;n+='<p><a href="'+o.edit_link+'">('+social_curator_admin.edit+")</a></p>",t(r).find("[data-post-content]").html(n)}a(r),"publish"===o.status&&g(o),"trash"===o.status&&_(o)}function u(){e(!1),t("[data-social-curator-import-all], [data-social-curator-single-import]").attr("disabled",!1).text(social_curator_admin.run_import),t("[data-import-site], [data-social-curator-single-import]").attr("disabled",!1),t("[data-social-curator-single-import-id]").val(""),k.closeAll(),""!==D&&(S.text(D),D="",S="")}function p(a){e(!0),t.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_curator_trash_post",post_id:a},success:function(){t("[data-trash-count]").text(parseInt(t("[data-trash-count]").text())+1),e(!1)}})}function m(){var a=parseInt(t("[data-social-curator-unmoderated-count]").text());a-=1,t("[data-social-curator-unmoderated-count]").text(a)}function f(){var a=parseInt(t("[data-social-curator-unmoderated-count]").text());a+=1,t("[data-social-curator-unmoderated-count]").text(a)}function _(a){var o='<div class="social-curator-status-buttons">';o+='<a href="#" data-permanent-delete-post data-post-id="'+a.id+'" class="social-curator-trash"><i class="social-curator-icon-blocked"></i>'+social_curator_admin.permanently_delete+"</a>",o+='<a href="#" data-restore-post data-post-id="'+a.id+'" class="social-curator-approve"><i class="social-curator-icon-redo"></i>'+social_curator_admin.restore+"</a>";var r=t("[data-post-container-id="+a.id+"]");t(r).find(".social-curator-status-buttons").remove(),t(r).append(o)}function v(o){e(!0),t.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_curator_approve_post",post_id:o},success:function(t){g(t),f(),a(),e(!1)}})}function g(a){var o='<div class="social-curator-alert-success">'+social_curator_admin.approved_by+" "+a.approved_by+" "+social_curator_admin.on+" "+a.approved_date;"1"===social_curator_admin.can_delete_posts&&(o+='<br><a href="#" data-trash-post data-post-id="'+a.id+'" class="unapprove-link">Unapprove and Trash</a>'),o+="</div>";var r=t("[data-post-container-id="+a.id+"]");t(r).find(".social-curator-status-buttons").remove(),t(r).append(o),t(r).addClass("approved")}function h(a){e(!0),t.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_curator_restore_post",post_id:a},success:function(o){f(),x(a),e(!1),t("[data-trash-count]").text(parseInt(t("[data-trash-count]").text())-1)}})}function b(a){e(!0),t.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_curator_delete_post",post_id:a},success:function(o){console.log(o),x(a),e(!1),t("[data-trash-count]").text(parseInt(t("[data-trash-count]").text())-1)}})}function x(o){var r=t("[data-post-container-id="+o+"]");t(".social-curator-post-grid").masonry("remove",r),a()}function w(){e(!0),t("[data-post-grid]").find(".social-curator-post-grid-single").remove(),t.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_curator_get_posts",status:t("[data-filter-status]").val(),site:t("[data-filter-site]").val(),adminview:!0},success:function(t){d(t.posts)}})}function y(a,o,r){t.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_update_post_status",post_id:a,status:o},success:function(a){console.log(a),t(r).attr("disabled",!1).text(social_curator_admin.update),"trash"===o&&t(r).parents("tr").fadeOut("fast",function(){t(this).remove()})}})}function j(){e(!0),t.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_empty_trash"},success:function(a){e(!1),t("[data-trash-count]").text("0"),t("[data-empty-social-trash]").attr("disabled",!1),"trash"===t("[data-filter-status]").val()&&t("[data-post-grid]").find(".social-curator-post-grid-single").remove()}})}var k=new SocialCuratorDropdown,D=(new SocialCuratorModal,""),S="";t(document).ready(function(){a(!1)}),t(document).on("click","[data-social-curator-import-all]",function(t){t.preventDefault(),o()}),t(document).on("click","[data-import-site]",function(a){a.preventDefault(),D=t(this).text(),S=t(this);var r=t(this).attr("data-import-site");t(this).text(social_curator_admin.importing),o(r)}),t(document).on("click","[data-social-curator-single-import]",function(t){t.preventDefault(),r()}),t(document).on("change","[data-social-curator-single-import-site]",function(){var a=t(this).val();t("[data-id-help-modal]").attr("data-social-curator-modal-open","id-help-"+a)}),t(document).on("click","[data-trash-post]",function(o){o.preventDefault(),p(t(this).attr("data-post-id")),m(),t(this).parents(".social-curator-post-grid-single").fadeOut("fast",function(){t(".social-curator-post-grid").masonry("remove",t(this)),a()})}),t(document).on("click","[data-approve-post]",function(a){a.preventDefault(),v(t(this).attr("data-post-id"))}),t(document).on("click","[data-restore-post]",function(a){a.preventDefault();var o=t(this).attr("data-post-id");h(o)}),t(document).on("click","[data-permanent-delete-post]",function(a){a.preventDefault();var o=t(this).attr("data-post-id");b(o)}),t(document).on("click","[data-filter-grid]",function(t){t.preventDefault(),w()}),t(document).on("click","[data-social-curator-moderate-select-button]",function(a){a.preventDefault();var o=t(this).attr("data-post-id"),r=t(this).siblings("[data-social-curator-moderate-select]").val(),i=t(this);t(this).attr("disabled","disabled").text(social_curator_admin.updating),y(o,r,i)}),t(document).on("click","[data-empty-social-trash]",function(a){a.preventDefault(),window.confirm("Are you sure you want to empty the trash?")&&(t(this).attr("disabled","disabled"),j())})});