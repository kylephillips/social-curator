jQuery(function(t){function a(){n(!0),t("[data-social-curator-manual-import]").attr("disabled","disabled").text(social_curator_admin.importing),t.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_curator_manual_import"},success:function(a){t("[data-social-curator-last-import]").text(a.import_date),o(a.import_count),r(a.posts)}})}function o(a){t("[data-social-curator-import-count]").find("span").text(a),t("[data-social-curator-import-count]").show()}function i(a){t("[data-social-curator-unmoderated-count]").text(a)}function n(a){a?t("[data-curation-loader]").show():t("[data-curation-loader]").hide()}function r(a){return 0===a.length?void s():void t.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_curator_get_posts",posts:a,status:["pending","publish"]},success:function(t){i(t.unmoderated_count),c(t.posts)}})}function c(t){for(var a=0;a<t.length;a++)e(t[a]);s()}function e(a){var o=t("[data-post-template]").find(".social-curator-post-grid-single").clone();if(t(o).find("[data-icon-link]").html(a.icon_link),t(o).find("[data-profile-image]").attr("src",a.profile_image_link),t(o).find("[data-profile-link]").attr("href",a.profile_link),t(o).find("[data-date]").text(a.date),t(o).find("[data-profile-name]").text(a.profile_name),t(o).find("[data-post-id]").attr("data-post-id",a.id),t(o).attr("data-post-container-id",a.id),a.thumbnail){var i='<img src="'+a.thumbnail+'" />';t(o).find("[data-thumbnail]").html(i)}if(a.content){var n=a.content;n+='<p><a href="'+a.edit_link+'">('+social_curator_admin.edit+")</a></p>",t(o).find("[data-post-content]").html(n)}d(o)}function s(){n(!1),t("[data-social-curator-manual-import]").attr("disabled",!1).text(social_curator_admin.run_import)}function d(a){var o=t(".social-curator-post-grid").masonry({itemSelector:".social-curator-post-grid-single",percentPosition:!0,gutter:".gutter-sizer"});o.imagesLoaded(function(){o.masonry()}),a&&o.prepend(a).masonry("prepended",a)}function u(a){n(!0),t.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_curator_trash_post",post_id:a},success:function(){n(!1)}})}function l(){var a=t("[data-social-curator-unmoderated-count]").text();a-=1,t("[data-social-curator-unmoderated-count]").text(a)}function p(a){n(!0),t.ajax({url:ajaxurl,type:"POST",data:{nonce:social_curator_admin.social_curator_nonce,action:"social_curator_approve_post",post_id:a},success:function(t){f(t),d(),n(!1)}})}function f(a){var o='<div class="social-curator-alert-success">'+social_curator_admin.approved_by+" "+a.approved_by+" "+social_curator_admin.on+" "+a.approved_date+"</div>",i=t("[data-post-container-id="+a.id+"]");t(i).find(".social-curator-status-buttons").remove(),t(i).append(o),t(i).addClass("approved")}t(document).on("click","[data-social-curator-manual-import]",function(t){t.preventDefault(),a()}),t(document).ready(function(){d(!1)}),t(document).on("click","[data-trash-post]",function(a){a.preventDefault(),u(t(this).attr("data-post-id")),l(),t(this).parents(".social-curator-post-grid-single").fadeOut("fast",function(){t(".social-curator-post-grid").masonry("remove",t(this)),d()})}),t(document).on("click","[data-approve-post]",function(a){a.preventDefault(),p(t(this).attr("data-post-id"))}),t(document).on("click",'[data-dismiss="alert"]',function(a){a.preventDefault(),t(this).parents(".social-curator-alert").fadeOut("fast")})});